"use strict";const ADDED_TO_CART_EVENT="added_to_cart",PRODUCT_LIST_AJAX_SHOP_PAGE="themename_products_list_ajax",PRODUCT_GRID_AJAX_SHOP_PAGE="themename_products_grid_ajax";class AjaxCart{constructor(){if("undefined"!=typeof themename_settings){let a=this;switch(a.ajaxCartPosition=themename_settings.cart_position,a.ajaxCartPosition){case"popup":a._initAjaxPopup();break;case"left":a._initAjaxCartOffCanvas("left");break;case"right":a._initAjaxCartOffCanvas("right");}a._initEventRemoveProduct(),a._initEventMiniCartAjaxQuantity()}}_initAjaxPopupContent(a){var b=this;if(0<a.closest("form.cart").find("input[name=\"themename_buy_now\"]").length&&"1"===a.closest("form.cart").find("input[name=\"themename_buy_now\"]").val())return;let c="";if(0<a.closest("form.cart").length){let e=a.closest("form.cart"),f=jQuery(e).find("input[name=\"variation_id\"]").length?parseInt(jQuery(e).find("input[name=\"variation_id\"]").val()):0;if(0===jQuery(e).find("input[name=\"data-type\"]").length)return;if(0!==f){var d=themename_settings.wc_ajax_url.toString().replace("%%endpoint%%","themename_popup_variation_name");c=b._initAjaxPopupVariationName(f,d)}else c=a.closest(".product").find(".product_title").html()}else c=a.closest(".product").find(".name  a").html();"undefined"==typeof c||b._initAjaxPopupShow(c)}_initAjaxPopupShow(a){let b=jQuery("#xptheme-cart-popup"),c=jQuery("#xptheme-cart-popup").find(".toast-body"),d=themename_settings.popup_cart_noti,e="";e+=themename_settings.popup_cart_icon,e+=`<p>"${a}" ${d}</p>`,wc_add_to_cart_params.is_cart||(e+=`<a href="${wc_add_to_cart_params.cart_url}" title="${wc_add_to_cart_params.i18n_view_cart}">${wc_add_to_cart_params.i18n_view_cart}</a>`),"undefined"!=typeof e&&c.html(e),b.find(".toast").toast("show")}_initAjaxPopupVariationName(a,b){var c=this;jQuery.ajax({url:b,data:{variation_id:a,security:themename_settings.wp_popupvariationnamenonce},dataType:"json",method:"POST",success:function(a){c._initAjaxPopupShow(a)}})}_initAjaxPopup(){var a=this;return"undefined"!=typeof wc_add_to_cart_params&&void(themename_settings.ajax_popup_quick?jQuery(`.ajax_cart_popup`).on("click",".ajax_add_to_cart, .single_add_to_cart_button",function(){let b=jQuery(this);b.parent().hasClass("shop-now")&&!b.parent().hasClass("ajax-single-cart")||a._initAjaxPopupContent(b)}):jQuery(`.ajax_cart_popup, .single_add_to_cart_button`).on(ADDED_TO_CART_EVENT,function(b,c,d,e){"undefined"==typeof c&&(c=JSON.parse(sessionStorage.getItem(wc_cart_fragments_params.fragment_name))),a._initAjaxPopupContent(e)}))}_initAjaxCartOffCanvas(a){jQuery(`.ajax_cart_${a}`).on(ADDED_TO_CART_EVENT,function(){themename_settings.mobile&&(a="mobile");var b=new bootstrap.Offcanvas(`#cart-offcanvas-${a}`);b.show(),jQuery(document.body).trigger("wc_fragments_refreshed"),jQuery.magnificPopup.close()})}_initEventRemoveProduct(){return"undefined"!=typeof wc_add_to_cart_params&&void jQuery(document).on("click",".mini_cart_content a.remove",a=>{this._onclickRemoveProduct(a)})}_onclickRemoveProduct(a){a.preventDefault();var b=jQuery(a.currentTarget).attr("data-product_id"),c=jQuery(a.currentTarget).attr("data-cart_item_key"),d=jQuery(a.currentTarget).closest(".widget_shopping_cart_content");this._callRemoveProductAjax(b,c,d,a)}_callRemoveProductAjax(a,b,c){var d=themename_settings.wc_ajax_url.toString().replace("%%endpoint%%","themename_product_remove");jQuery.ajax({type:"POST",dataType:"json",url:d,data:{product_id:a,cart_item_key:b,security:themename_settings.wp_productremovenonce},beforeSend:function(){c.find(".mini_cart_content").append("<div class=\"ajax-loader-wapper\"><div class=\"ajax-loader\"></div></div>").fadeTo("slow",.3)},success:b=>{this._onRemoveSuccess(b,a),jQuery(document.body).trigger("removed_from_cart")}})}_onRemoveSuccess(a,b){if(a&&!a.error){var c=a.fragments;c&&jQuery.each(c,function(a,b){jQuery(a).replaceWith(b)}),jQuery(".add_to_cart_button.added[data-product_id=\""+b+"\"]").removeClass("added").next(".wc-forward").remove()}}_initEventMiniCartAjaxQuantity(){var a;jQuery("body").on("change",".mini-cart-item .qty",function(){var b=themename_settings.wc_ajax_url.toString().replace("%%endpoint%%","themename_quantity_mini_cart"),c=jQuery(this),d=jQuery(c).parents(".mini_cart_content"),e=jQuery(c).attr("name").replace(/cart\[([\w]+)\]\[qty\]/g,"$1"),f=parseFloat(jQuery(c).attr("max"));f||(f=!1),clearTimeout(a);var g=parseFloat(jQuery(c).val());0<f&&g>f&&(jQuery(c).val(f),g=f),a=setTimeout(function(){jQuery.ajax({url:b,type:"POST",dataType:"json",cache:!1,data:{hash:e,quantity:g,security:themename_settings.wp_minicartquantitynonce},beforeSend:function(){d.append("<div class=\"ajax-loader-wapper\"><div class=\"ajax-loader\"></div></div>").fadeTo("slow",.3)},success:function(a){a&&a.fragments&&(jQuery.each(a.fragments,function(a,b){jQuery(a).length&&jQuery(a).replaceWith(b)}),"undefined"!=typeof $supports_html5_storage&&$supports_html5_storage&&(sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(a.fragments)),set_cart_hash(a.cart_hash),a.cart_hash&&set_cart_creation_timestamp()),jQuery(document.body).trigger("wc_fragments_refreshed"))}})},300)})}}class WishList{constructor(){this._onChangeWishListItem()}_onChangeWishListItem(){jQuery(document).on("added_to_wishlist removed_from_wishlist",()=>{var a=jQuery(".count_wishlist").find("> span");if(0!==a.length){var b=themename_settings.wc_ajax_url.toString().replace("%%endpoint%%","themename_update_wishlist_count");jQuery.ajax({url:b,type:"POST",data:{security:themename_settings.wp_wishlistcountnonce},dataType:"json",success:function(b){a.html(b.count)},beforeSend:function(){a.block({message:null,overlayCSS:{background:"#fff url("+themename_settings.loader+") no-repeat center",opacity:.5,cursor:"none"}})},complete:function(){a.unblock()}})}})}}class ProductItem{_initAddButtonQuantity(){let a=jQuery(".quantity input");a.each(function(){jQuery(this).parent(".box").length||(jQuery(this).wrap("<span class=\"box\"></span>"),"hidden"==jQuery(this).attr("type")?jQuery(this).parents(".quantity").addClass("hidden"):(jQuery(`<button class="minus" type="button" value="&nbsp;">${themename_settings.quantity_minus}</button>`).insertBefore(jQuery(this)),jQuery(`<button class="plus" type="button" value="&nbsp;">${themename_settings.quantity_plus}</button>`).insertAfter(jQuery(this))))})}_initOnChangeQuantity(a){"undefined"==typeof themename_settings||(this._initAddButtonQuantity(),jQuery(document).off("click",".plus, .minus").on("click",".plus, .minus",function(b){b.preventDefault();var c=jQuery(this).closest(".quantity").find(".qty"),d=parseFloat(c.val()),e=jQuery(c).attr("max"),f=jQuery(c).attr("min"),g=jQuery(c).attr("step");d=d&&""!==d&&"NaN"!==d?d:0,e=""===e||"NaN"===e?"":e,f=""===f||"NaN"===f?0:f,g="any"===g||""===g||g===void 0||parseFloat(g)===NaN?1:g,jQuery(this).is(".plus")?e&&(e==d||d>e)?c.val(e):c.val(d+parseFloat(g)):f&&(f==d||d<f)?c.val(f):d>f&&c.val(d-parseFloat(g)),a&&"function"==typeof a&&(jQuery(this).parent().find("input").trigger("change"),a())}))}_initSwatches(){0===jQuery(".xptheme-swatches-wrapper li a").length||jQuery("body").on("click",".xptheme-swatches-wrapper li a",function(a){a.preventDefault();let b=!1,c=jQuery(this).closest(".product-block");var d=c.find(".image img:eq(0)");jQuery(this).closest("ul").hasClass("active")||(jQuery(this).closest("ul").addClass("active"),d.attr("data-old",d.attr("src"))),jQuery(this).hasClass("selected")?(d.attr("src",d.data("old")),jQuery(this).removeClass("selected"),c.removeClass("product-swatched")):(jQuery(this).closest("ul").find("li a").each(function(){jQuery(this).hasClass("selected")&&jQuery(this).removeClass("selected")}),jQuery(this).addClass("selected"),c.addClass("product-swatched"),b=!0);b&&("undefined"!=typeof jQuery(this).data("imageSrc")&&d.attr("src",jQuery(this).data("imageSrc")),"undefined"!=typeof jQuery(this).data("imageSrcset")&&d.attr("srcset",jQuery(this).data("imageSrcset")),"undefined"!=typeof jQuery(this).data("imageSizes")&&d.attr("sizes",jQuery(this).data("imageSizes")))})}_initQuantityMode(){"undefined"!=typeof themename_settings&&themename_settings.quantity_mode&&(jQuery(".woocommerce .products").on("click",".quantity .qty",function(){return!1}),jQuery(".woocommerce .products").on("change input",".quantity .qty",function(){var a=jQuery(this).parents(".product").find(".add_to_cart_button");a.attr("data-quantity",jQuery(this).val())}),jQuery(".woocommerce .products").on("keypress",".quantity .qty",function(a){13===(a.which||a.keyCode)&&jQuery(this).parents(".product").find(".add_to_cart_button").trigger("click")}))}}class Cart{constructor(){this._initEventChangeQuantity(),this._init_shipping_free_notification(),jQuery(document.body).on("updated_wc_div",()=>{this._initEventChangeQuantity(),this._init_shipping_free_notification(),"undefined"!=typeof wc_add_to_cart_variation_params&&jQuery(".variations_form").each(function(){jQuery(this).wc_variation_form()})}),jQuery(document.body).on("cart_page_refreshed",()=>{this._initEventChangeQuantity()}),jQuery(document.body).on("xptheme_display_mode",()=>{this._initEventChangeQuantity()})}_initEventChangeQuantity(){const a=jQuery("body.woocommerce-cart [name='update_cart']"),b=new ProductItem;0===a.length?b._initOnChangeQuantity(()=>{}):b._initOnChangeQuantity(()=>{a.prop("disabled",!1),"undefined"!=typeof themename_settings&&themename_settings.ajax_update_quantity&&jQuery("[name='update_cart']").trigger("click")})}_init_shipping_free_notification(){const a=jQuery(".xptheme-total-condition");0<a.length&&a.each(function(){if(!jQuery(this).hasClass("xptheme-active")){jQuery(this).addClass("xptheme-active");const a=jQuery(this).attr("data-per");jQuery(this).find(".xptheme-total-condition-hint, .xptheme-subtotal-condition").css({width:a+"%"})}})}}class Checkout{constructor(){this._toogleWoocommerceIcon(),this._initEventCheckoutAjaxQuantity()}_toogleWoocommerceIcon(){const a=jQuery(".woocommerce-info a");1>a.length||a.on("click",function(){const a=jQuery(this).find(".icons");a.toggleClass("icon-arrow-down icon-arrow-up")})}_initEventCheckoutAjaxQuantity(){var a;jQuery("body").on("change input",".woocommerce-checkout-review-order-table .quantity .qty",function(){var b=themename_settings.wc_ajax_url.toString().replace("%%endpoint%%","themename_quantity_mini_cart"),c=jQuery(this),d=jQuery(c).attr("name").replace(/cart\[([\w]+)\]\[qty\]/g,"$1"),e=parseFloat(jQuery(c).attr("max"));e||(e=!1),clearTimeout(a);var f=parseFloat(jQuery(c).val());0<e&&f>e&&(jQuery(c).val(e),f=e),a=setTimeout(function(){jQuery.ajax({url:b,type:"POST",dataType:"json",cache:!1,data:{hash:d,quantity:f,security:themename_settings.wp_minicartquantitynonce},beforeSend:function(){jQuery("form.checkout").trigger("update")},success:function(a){a&&a.fragments&&(jQuery.each(a.fragments,function(a,b){jQuery(a).length&&jQuery(a).replaceWith(b)}),"undefined"!=typeof $supports_html5_storage&&$supports_html5_storage&&(sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(a.fragments)),set_cart_hash(a.cart_hash),a.cart_hash&&set_cart_creation_timestamp()),jQuery("form.checkout").trigger("update"))}})},300)})}}class WooCommon{constructor(){this._xpthemeFixRemove(),jQuery(document.body).on("xpthemeFixRemove",()=>{this._xpthemeFixRemove()})}_xpthemeFixRemove(){const a=document.querySelector(".xptheme-gallery-varible .woocommerce-product-gallery__trigger");a&&a.remove()}}class QuickView{constructor(){"undefined"==typeof jQuery.magnificPopup||"undefined"==typeof themename_settings||this._init_xptheme_quick_view()}_init_xptheme_quick_view(){var a=this;jQuery(document).off("click","a.qview-button").on("click","a.qview-button",function(b){b.preventDefault();let c=jQuery(this);c.parent().addClass("loading");let d=c.attr("data-effect"),e=!1,f=jQuery(this).data("product_id"),g=themename_settings.wc_ajax_url.toString().replace("%%endpoint%%","themename_quickview_product")+"&product_id="+f;"undefined"!=typeof themename_settings.loader&&(e=!0,c.block({message:null,overlayCSS:{background:"#fff url("+themename_settings.loader+") no-repeat center",opacity:.5,cursor:"none"}})),a._ajax_call(c,g,e,d,jQuery),b.stopPropagation()})}_ajax_call(a,b,c,d,e){e.get(b,function(b){e.magnificPopup.open({removalDelay:0,closeMarkup:"<button title=\"%title%\" type=\"button\" class=\"mfp-close\"> "+themename_settings.close+"</button>",callbacks:{beforeOpen:function(){this.st.mainClass=d+" themename-quickview"}},items:{src:b,type:"inline"}});let f=jQuery("#xptheme-quick-view-content"),g=f.find(".variations_form");"undefined"!=typeof wc_add_to_cart_variation_params&&g.each(function(){jQuery(this).wc_variation_form()}),"undefined"!=typeof wc_single_product_params&&f.find(".woocommerce-product-gallery").each(function(){jQuery(this).wc_product_gallery(wc_single_product_params)}),jQuery(document.body).trigger("updated_wc_div"),a.parent().removeClass("loading"),c&&a.unblock(),jQuery(document.body).trigger("xptheme_quick_view")})}}class StickyBar{constructor(){"undefined"==typeof jQuery.fn.onePageNav||this._productSingleOnepagenav()}_productSingleOnepagenav(){const a=jQuery("#sticky-menu-bar");if(0<a.length){let b=0;0<jQuery("#wpadminbar").length&&(b=jQuery("#wpadminbar").outerHeight());let c=a.outerHeight()+b;a.onePageNav({currentClass:"current",changeHash:!1,scrollSpeed:750,scrollThreshold:.5,scrollOffset:c,filter:"",easing:"swing",begin:function(){},end:function(){},scrollChange:function(){},scrollTo:!1})}const b=jQuery("#sticky-menu-bar");if(0<b.length){const a=jQuery(window).width();jQuery(".xptheme_header-template").removeClass("main-sticky-header");const c=0<jQuery(".single_add_to_cart_button").length?jQuery(".single_add_to_cart_button").offset().top:0,d=0<jQuery("div.product .out-of-stock").length?jQuery("div.product .out-of-stock").offset().top:0;0<jQuery(".by-vendor-name-link").length&&(d=jQuery(".by-vendor-name-link").offset().top);const e=0<jQuery(".single_add_to_cart_button").length?c:d;this._checkScroll(a,e,b),jQuery(window).scroll(()=>{this._checkScroll(a,e,b)})}b.hasClass("active")&&0<jQuery("#wpadminbar").length&&b.css("top",jQuery("#wpadminbar").height())}_checkScroll(a,b,c){if(768<=a){const a=jQuery(window).scrollTop();a>b?(c.addClass("active"),0<jQuery("#wpadminbar").length&&c.css("top",jQuery("#wpadminbar").height())):c.removeClass("active")}else c.removeClass("active")}}class DisplayMode{constructor(){"undefined"==typeof themename_settings||(this._initModeListShopPage(),this._initModeGridShopPage(),jQuery(document.body).on("displayMode",()=>{this._initModeListShopPage(),this._initModeGridShopPage()}))}_initModeListShopPage(){jQuery("#display-mode-list").on("click",function(){if(!jQuery(this).hasClass("active")){var a=jQuery(this),b=themename_settings.wc_ajax_url.toString().replace("%%endpoint%%",PRODUCT_LIST_AJAX_SHOP_PAGE);return jQuery.ajax({url:b,data:{query:themename_settings.posts,security:themename_settings.wp_productslistnonce},dataType:"json",method:"POST",beforeSend:function(){a.closest("#xptheme-main-content").find(".display-products").addClass("load-ajax")},success:function(b){b&&(a.parent().children().removeClass("active"),a.addClass("active"),a.closest("#xptheme-main-content").find(".display-products > div").html(b),a.closest("#xptheme-main-content").find(".display-products").fadeOut(0,function(){jQuery(this).addClass("products-list").removeClass("products-grid grid").fadeIn(300)}),"undefined"!=typeof wc_add_to_cart_variation_params&&jQuery(".variations_form").each(function(){jQuery(this).wc_variation_form().find(".variations select:eq(0)").trigger("change")}),jQuery(document.body).trigger("xptheme_display_mode"),a.closest("#xptheme-main-content").find(".display-products").removeClass("load-ajax"),Cookies.set("themename_display_mode","list",{expires:.1,path:"/"}))}}),!1}})}_initModeGridShopPage(){jQuery("#display-mode-grid").on("click",function(){if(!jQuery(this).hasClass("active")){var a=jQuery(this),b=themename_settings.wc_ajax_url.toString().replace("%%endpoint%%",PRODUCT_GRID_AJAX_SHOP_PAGE);return a.closest("#xptheme-main-content").find("div.display-products"),jQuery.ajax({url:b,data:{query:themename_settings.posts,security:themename_settings.wp_productsgridnonce},dataType:"json",method:"POST",beforeSend:function(){a.closest("#xptheme-main-content").find(".display-products").addClass("load-ajax")},success:function(b){if(b){a.parent().children().removeClass("active"),a.addClass("active"),a.closest("#xptheme-main-content").find(".display-products > div").html(b);let c=a.closest("#xptheme-main-content").find("div.display-products");c.fadeOut(0,function(){jQuery(this).addClass("products-grid").removeClass("products-list").fadeIn(300)}),"undefined"!=typeof wc_add_to_cart_variation_params&&jQuery(".variations_form").each(function(){jQuery(this).wc_variation_form().find(".variations select:eq(0)").trigger("change")}),jQuery(document.body).trigger("xptheme_display_mode"),a.closest("#xptheme-main-content").find(".display-products").removeClass("load-ajax"),Cookies.set("themename_display_mode","grid",{expires:.1,path:"/"})}}}),!1}})}}class AjaxFilter{constructor(){this._intAjaxFilter()}_intAjaxFilter(){jQuery(document).on("woof_ajax_done",function(){jQuery(".woocommerce-product-gallery").each(function(){jQuery(this).wc_product_gallery()}),jQuery(document.body).trigger("xpthemeFixRemove displayMode ajax_sidebar_shop_mobile"),jQuery("body").hasClass("filter-mobile-active")&&jQuery("body").removeClass("filter-mobile-active"),"undefined"!=typeof tawcvs_variation_swatches_form&&(jQuery(".variations_form").tawcvs_variation_swatches_form(),jQuery(document.body).trigger("tawcvs_initialized")),jQuery(".variations_form").each(function(){jQuery(this).wc_variation_form()})})}}class ShopProduct{constructor(){this._SidebarShopMobile(),this._removeProductCategory(),jQuery(document.body).on("ajax_sidebar_shop_mobile",()=>{this._SidebarShopMobile(),jQuery(".filter-btn-wrapper").removeClass("active"),jQuery("body").removeClass("filter-mobile-active")})}_SidebarShopMobile(){let a=jQuery("#button-filter-btn"),b=jQuery("#filter-close,.close-side-widget");a.on("click",function(){jQuery(".filter-btn-wrapper").addClass("active"),jQuery("body").addClass("filter-mobile-active")}),b.on("click",function(){jQuery(".filter-btn-wrapper").removeClass("active"),jQuery("body").removeClass("filter-mobile-active")})}_removeProductCategory(){let a=jQuery(".archive-shop .display-products .product-category");0===a.length||a.remove()}}class SingleProduct{constructor(){var a=this;a._intStickyMenuBar(),a._intNavImage(),a._intReviewPopup(),a._intSingleGalleryPopup(),a._intTabsMobile(),a._initBuyNow(),"popup"===themename_settings.mobile_form_cart_style&&(a._initChangeImageVarible(),a._initOpenAttributeMobile(),a._initCloseAttributeMobile(),a._initCloseAttributeMobileWrapper(),a._initAddToCartClickMobile(),a._initBuyNowwClickMobile()),a._initAjaxSingleCart(),a._initAskAQuestionName(),jQuery(document.body).on("xptheme_quick_view",()=>{a._initBuyNow(),a._initAjaxSingleCart()})}_intStickyMenuBar(){0===jQuery("#sticky-custom-add-to-cart").length||jQuery("body").on("click","#sticky-custom-add-to-cart",function(a){jQuery("#shop-now .single_add_to_cart_button").click(),a.stopPropagation()})}_intNavImage(){jQuery(window).scroll(function(){let a=400<jQuery(this).scrollTop();jQuery(".product-nav").toggleClass("active",a)})}_intReviewPopup(){if(0!==jQuery("#list-review-images").length){var a=[];jQuery("#list-review-images").find(".review-item").each(function(){var b=jQuery(this).find(".review-link"),c={src:b.attr("href"),w:b.data("width"),h:b.data("height"),title:b.children(".caption").html()};a.push(c)}),jQuery("#list-review-images > ul> li a").off("click").on("click",function(b){b.preventDefault();var c=jQuery(".pswp")[0],d={index:jQuery(this).parents(".review-item").index(),showHideOpacity:!0,closeOnVerticalDrag:!1,mainClass:"pswp-review-images"},e=new PhotoSwipe(c,PhotoSwipeUI_Default,a,d);e.init(),b.stopPropagation()})}}_intSingleGalleryPopup(){if("undefined"!=typeof PhotoSwipe&&0!==jQuery("#pf-gallery-images").length){var a=[];jQuery("#pf-gallery-images").find(".item").each(function(){var b=jQuery(this).find(".gallery-link"),c={src:b.attr("href"),w:b.data("width"),h:b.data("height")};a.push(c)}),jQuery("#pf-gallery-images .gallery-link").off("click").on("click",function(b){b.preventDefault();var c=jQuery(".pswp")[0],d={index:jQuery(this).parents(".item").index(),showHideOpacity:!0,closeOnVerticalDrag:!1,mainClass:"pswp-pfgallery-images"},e=new PhotoSwipe(c,PhotoSwipeUI_Default,a,d);e.init(),b.stopPropagation()})}}_intTabsMobile(){let a=jQuery(".woocommerce-tabs-sidebar"),b=a.find(".tabs-sidebar a"),c=a.find(".close-tab, #tab-sidebar-close"),d=jQuery("body"),f=jQuery(".tabs-sidebar"),g=window.matchMedia("(max-width: 1199px)");0===a.length||(b.on("click",function(b){b.preventDefault();let c=jQuery(this).data("tabid");f.addClass("open"),a.find(".wc-tab-sidebar").removeClass("open"),jQuery("#"+c).addClass("open"),g.matches&&d.addClass("overflow-y")}),c.on("click",function(a){a.preventDefault(),f.removeClass("open"),jQuery(this).closest(".woocommerce-tabs-sidebar").find(".wc-tab-sidebar").removeClass("open"),g.matches&&d.removeClass("overflow-y")}))}_initBuyNow(){0===jQuery(".xptheme-buy-now").length||(jQuery("body").on("click",".xptheme-buy-now",function(a){a.preventDefault();let b=jQuery(this).closest("form.cart"),c=b.find("[type=\"submit\"]"),d=b.find("input[name=\"themename_buy_now\"]"),e=c.is(".disabled");e?c.trigger("click"):(d.val("1"),b.find(".single_add_to_cart_button").trigger("click"))}),jQuery(document.body).on("check_variations",function(){let a=jQuery("form.variations_form").find(".single_add_to_cart_button");a.each(function(){let a=jQuery(this).is(".disabled");a?jQuery(this).parent().find(".xptheme-buy-now").addClass("disabled"):jQuery(this).parent().find(".xptheme-buy-now").removeClass("disabled")})}))}_initFeatureVideo(){if("undefined"!=typeof themename_settings){let a=jQuery(document).find(themename_settings.img_class_container+".xptheme_featured_content");if(0!==a.length){let b=a.index(),c=jQuery(themename_settings.thumbnail_gallery_class_element).get(b);jQuery(c).addClass("xptheme_featured_thumbnail")}}}_initChangeImageVarible(){let a=jQuery(".information form.variations_form");0===a.length||(a.on("change",function(){var b=jQuery(this),c=[];b.find(".variations tr").each(function(){"undefined"!=typeof jQuery(this).find("select").val()&&c.push(jQuery(this).find("select option:selected").text())}),b.parent().find(".mobile-attribute-list .value").empty().append(c.join("/ ")),a.find(".single_variation_wrap .single_variation").is(":empty")?a.find(".mobile-infor-wrapper .infor-body").empty().append(a.parent().children(".price").html()).wrapInner("<p class=\"price\"></p>"):a.find(".single_variation_wrap .single_variation .woocommerce-variation-price").is(":empty")?(a.find(".mobile-infor-wrapper .infor-body").empty().append(a.find(".single_variation_wrap .single_variation").html()),a.find(".mobile-infor-wrapper .infor-body .woocommerce-variation-price").empty().append(a.parent().children(".price").html()).wrapInner("<p class=\"price\"></p>")):a.find(".mobile-infor-wrapper .infor-body").empty().append(a.find(".single_variation_wrap .single_variation").html())}),setTimeout(function(){jQuery(document.body).on("reset_data",()=>(a.find(".mobile-infor-wrapper .infor-body .woocommerce-variation-availability").empty(),void a.find(".mobile-infor-wrapper .infor-body").empty().append(a.parent().children(".price").html()).wrapInner("<p class=\"price\"></p>"))),jQuery(document.body).on("woocommerce_gallery_init_zoom",()=>{let a=jQuery(".flex-control-thumbs").find(".flex-active").attr("src");jQuery(".mobile-infor-wrapper img").attr("src",a)}),jQuery(document.body).on("mobile_attribute_open",()=>{a.find(".single_variation_wrap .single_variation").is(":empty")?a.find(".mobile-infor-wrapper .infor-body").empty().append(a.parent().children(".price").html()):a.find(".single_variation_wrap .single_variation .woocommerce-variation-price").is(":empty")?(a.find(".mobile-infor-wrapper .infor-body").empty().append(a.find(".single_variation_wrap .single_variation").html()),a.find(".mobile-infor-wrapper .infor-body .woocommerce-variation-price").empty().append(a.parent().children(".price").html()).wrapInner("<p class=\"price\"></p>")):a.find(".mobile-infor-wrapper .infor-body").empty().append(a.find(".single_variation_wrap .single_variation").html())})},1e3))}_initOpenAttributeMobile(){const a=jQuery("#attribute-open");0===a.length||a.off().on("click",function(){jQuery(this).parent().parent().find("form.cart").addClass("open open-btn-all")})}_initAddToCartClickMobile(){const a=jQuery("#xptheme-click-addtocart");0===a.length||a.off().on("click",function(){jQuery(this).parent().parent().find("form.cart").addClass("open open-btn-addtocart")})}_initBuyNowwClickMobile(){const a=jQuery("#xptheme-click-buy-now");0===a.length||a.off().on("click",function(){jQuery(this).parent().parent().find("form.cart").addClass("open open-btn-buynow")})}_initCloseAttributeMobile(){let a=jQuery("#mobile-close-infor");0===a.length||a.off().on("click",function(){const a=jQuery(this).parents("form.cart");a.removeClass("open"),a.hasClass("open-btn-all")&&a.removeClass("open-btn-all"),a.hasClass("open-btn-buynow")&&a.removeClass("open-btn-buynow"),a.hasClass("open-btn-addtocart")&&a.removeClass("open-btn-addtocart")})}_initCloseAttributeMobileWrapper(){let a=jQuery("#mobile-close-infor-wrapper");0===a.length||a.off().on("click",function(){const a=jQuery(this).parent().find("form.cart");a.removeClass("open"),a.hasClass("open-btn-all")&&a.removeClass("open-btn-all"),a.hasClass("open-btn-buynow")&&a.removeClass("open-btn-buynow"),a.hasClass("open-btn-addtocart")&&a.removeClass("open-btn-addtocart")})}_initAjaxSingleCart(){var a=this;0<jQuery("#shop-now").length&&!jQuery("#shop-now").hasClass("ajax-single-cart")||jQuery("body").on("click","form.cart .single_add_to_cart_button",function(){if(!(0<jQuery(this).closest("form.cart").find("input[name=\"themename_buy_now\"]").length&&"1"===jQuery(this).closest("form.cart").find("input[name=\"themename_buy_now\"]").val())){var b=!0,c=jQuery(this),d=jQuery(c).parents("form.cart");jQuery("body").trigger("themename_before_click_single_add_to_cart",[d]);let e=jQuery(d).find("input[name=\"themename-enable-addtocart-ajax\"]");if(0>=jQuery(e).length||"1"!==jQuery(e).val())return void(b=!1);else{let e=!!(jQuery(c).hasClass("disabled")||jQuery(c).hasClass("themename-ct-disabled")),f=!e&&jQuery(d).find("input[name=\"data-product_id\"]").val();if(f&&!jQuery(c).hasClass("loading")){let e=jQuery(d).find("input[name=\"data-type\"]").val(),g=jQuery(d).find(".quantity input[name=\"quantity\"]").val(),h=jQuery(d).find("input[name=\"variation_id\"]").length?parseInt(jQuery(d).find("input[name=\"variation_id\"]").val()):0,i={};if("variable"===e&&!h)return b=!1,!1;0<h&&jQuery(d).find(".variations").length&&jQuery(d).find(".variations").find("select").each(function(){i[jQuery(this).attr("name")]=jQuery(this).val()}),b&&a._callAjaxSingleCart(c,f,g,e,h,i)}return!1}}})}_callAjaxSingleCart(a,b,c,d,e,f){var g=jQuery(a).parents("form.cart");if("grouped"!==d){if("undefined"!=typeof themename_settings&&"undefined"!=typeof themename_settings.wc_ajax_url){var h=themename_settings.wc_ajax_url.toString().replace("%%endpoint%%","themename_single_add_to_cart"),i={product_id:b,quantity:c,product_type:d,variation_id:e,variation:f};0<jQuery(g).length&&("simple"===d&&jQuery(g).find(".themename-custom-fields").append("<input type=\"hidden\" name=\"add-to-cart\" value=\""+b+"\" />"),i=jQuery(g).serializeArray(),jQuery(g).find(".themename-custom-fields [name=\"add-to-cart\"]").remove()),jQuery.ajax({url:h,type:"post",dataType:"json",cache:!1,data:i,beforeSend:function(){jQuery(a).removeClass("added themename-added").addClass("loading")},success:function(b){if(!!b.error)jQuery(a).removeClass("loading");else if("undefined"!=typeof b.redirect&&b.redirect)window.location.href=b.redirect;else{var c=b.fragments;c&&(jQuery.each(c,function(a,b){jQuery(a).addClass("updating").replaceWith(b)}),!jQuery(a).hasClass("added")&&jQuery(a).addClass("added themename-added")),jQuery(document.body).trigger("added_to_cart",[b.fragments,b.cart_hash,a]),jQuery("#mobile-close-infor-wrapper").trigger("click")}}})}return!1}}_initAskAQuestionName(){const a=jQuery(".popup-aska-question");0===a.find(".wpforms-product-name").length||a.find(".wpforms-product-name input[type=\"text\"]").val(a.find(".product-info .name").text())}}class ProductTabs{constructor(){"undefined"==typeof themename_settings||this._initProductTabs()}_initProductTabs(){jQuery(".xptheme-element-product-tabs.ajax-active").each(function(){var a=jQuery(this);a.find(".product-tabs-title li a").off("click").on("click",function(a){a.preventDefault();var b=jQuery(this),c=b.parent().parent().data("atts"),d=b.data("value"),e=b.attr("data-bs-target");if(b.index(),!jQuery(e).hasClass("active-content")){var f=themename_settings.wc_ajax_url.toString().replace("%%endpoint%%","themename_products_tab_shortcode");jQuery.ajax({url:f,data:{atts:c,value:d,security:themename_settings.wp_productstabnonce},dataType:"json",method:"POST",beforeSend:function(){jQuery(e).parent().addClass("load-ajax")},success:function(a){!0===a.success?(jQuery(e).html(a.data.html),jQuery(e).parent().find(".current").removeClass("current"),jQuery(e).parent().removeClass("load-ajax"),jQuery(e).addClass("active-content"),jQuery(e).addClass("current"),jQuery(document.body).trigger("xptheme_carousel_slick"),jQuery(document.body).trigger("xptheme_ajax_tabs_products")):console.log("loading html products tab ajax returns wrong data")},error:function(){console.log("ajax error")}})}})})}}class ProductCategoriesTabs{constructor(){"undefined"==typeof themename_settings||this._initProductCategoriesTabs()}_initProductCategoriesTabs(){jQuery(".xptheme-element-product-categories-tabs.ajax-active").each(function(){var a=jQuery(this);a.find(".product-categories-tabs-title li a").off("click").on("click",function(a){a.preventDefault();var b=jQuery(this),c=b.parent().parent().data("atts"),d=b.data("value"),e=b.attr("data-bs-target");if(b.index(),!jQuery(e).hasClass("active-content")){jQuery(e).parent().addClass("load-ajax");var f=themename_settings.wc_ajax_url.toString().replace("%%endpoint%%","themename_products_categories_tab_shortcode");jQuery.ajax({url:f,data:{atts:c,value:d,security:themename_settings.wp_productscategoriestabnonce},dataType:"json",method:"POST",success:function(a){!0===a.success?(jQuery(e).html(a.data.html),jQuery(e).parent().find(".current").removeClass("current"),jQuery(e).parent().removeClass("load-ajax"),jQuery(e).addClass("active-content"),jQuery(e).addClass("current"),jQuery(document.body).trigger("xptheme_carousel_slick"),jQuery(document.body).trigger("xptheme_ajax_tabs_products")):console.log("loading html products categories tab ajax returns wrong data")},error:function(){console.log("ajax error")}})}})})}}class CollapseDescriptionTab{constructor(){themename_settings.collapse_details_tab&&jQuery(window).on("load",()=>{this._intCollapseDescriptionTab()})}_intCollapseDescriptionTab(){const a=jQuery(".single-product .xptheme-product-description");if(0<a.length){const b=a.find(".xptheme-product-description--content").height(),c=themename_settings.maximum_height_collapse;b>c&&(a.addClass("fix-height").css("max-height",parseInt(c)),a.append(`<div class="xptheme-description-toggle xptheme-description-toggle__less"><a title="${themename_settings.show_less}" href="javascript:void(0);">${themename_settings.show_less}</a></div>`),a.append(`<div class="xptheme-description-toggle xptheme-description-toggle__more"><a title="${themename_settings.show_more}" href="javascript:void(0);">${themename_settings.show_more}</a></div>`),jQuery("body").on("click",".xptheme-description-toggle__more",()=>{a.removeClass("fix-height").css("max-height","none"),jQuery("body .xptheme-description-toggle__more").hide(),jQuery("body .xptheme-description-toggle__less").show()}),jQuery("body").on("click",".xptheme-description-toggle__less",()=>{a.addClass("fix-height").css("max-height",parseInt(c)),jQuery("body .xptheme-description-toggle__less").hide(),jQuery("body .xptheme-description-toggle__more").show()}))}}}jQuery(document).ready(()=>{var a=new ProductItem;a._initSwatches(),a._initQuantityMode(),jQuery(document.body).trigger("tawcvs_initialized"),new AjaxCart,new WishList,new Cart,new Checkout,new WooCommon,new QuickView,new StickyBar,new DisplayMode,new ShopProduct,new AjaxFilter,new SingleProduct,new ProductTabs,new ProductCategoriesTabs,new CollapseDescriptionTab}),setTimeout(function(){jQuery(document.body).on("wc_fragments_refreshed wc_fragments_loaded removed_from_cart updated_checkout",function(){var a=new ProductItem;a._initAddButtonQuantity();var b=new Cart;b._init_shipping_free_notification()})},30),jQuery(document).ready(function(){var a=new SingleProduct;a._initFeatureVideo()});var AddButtonQuantity=function(){var a=new ProductItem;a._initAddButtonQuantity()};jQuery(document.body).on("xptheme_ajax_tabs_products",()=>{var a=new ProductItem;a._initAddButtonQuantity()}),jQuery(window).on("elementor/frontend/init",function(){elementorFrontend.isEditMode()&&"undefined"!=typeof themename_settings&&Array.isArray(themename_settings.elements_ready.products)&&jQuery.each(themename_settings.elements_ready.products,function(a,b){elementorFrontend.hooks.addAction("frontend/element_ready/xptheme-"+b+".default",AddButtonQuantity)})});var AjaxProductTabs=function(){new ProductTabs,new ProductCategoriesTabs};jQuery(window).on("elementor/frontend/init",function(){elementorFrontend.isEditMode()&&"undefined"!=typeof themename_settings&&elementorFrontend.isEditMode()&&Array.isArray(themename_settings.elements_ready.ajax_tabs)&&jQuery.each(themename_settings.elements_ready.ajax_tabs,function(a,b){elementorFrontend.hooks.addAction("frontend/element_ready/xptheme-"+b+".default",AjaxProductTabs)})});
